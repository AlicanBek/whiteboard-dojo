<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard Dojo - Master the Art of Design Challenges</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --accent: #f59e0b;
            --background: #ffffff;
            --surface: #f8fafc;
            --border: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
            cursor: pointer;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary);
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
        }

        /* Dojo Section */
        .dojo-section {
            display: block;
        }

        .dojo-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .dojo-title {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dojo-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 900px;
            margin: 0 auto;
        }

        .challenge-generator {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        /* Challenge Generator Layout */
        .selectors-row {
            display: flex;
            gap: 2.5rem;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            padding: 1rem;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
        }

        .generate-row {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .selector-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .selector-label {
            font-weight: 600;
            color: var(--text-primary);
            min-width: 70px;
            font-size: 0.9rem;
        }

        .selector-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .selector-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--border);
            background: var(--background);
            color: var(--text-secondary);
            border-radius: 6px;
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .selector-btn:hover,
        .selector-btn.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
        }

        .generate-btn {
            padding: 1rem 2.5rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(37, 99, 235, 0.2);
            transform: translateY(0);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 16px rgba(37, 99, 235, 0.3);
        }

        .generate-btn:active {
            transform: translateY(0);
        }

        .generate-icon {
            font-size: 1.2rem;
        }

        .challenge-display {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            min-height: 180px;
        }

        .timer-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.25rem;
        }

        .timer-controls-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
        }

        .timer-main-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .timer-action-buttons {
            display: flex;
            gap: 0.6rem;
        }

        .timer-btn {
            padding: 0.6rem 1rem;
            font-size: 0.85rem;
        }

        .challenge-content {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 140px;
        }

        .challenge-placeholder {
            text-align: center;
        }

        .challenge-structure {
            text-align: left;
            max-width: 800px;
            margin: 0;
        }

        .challenge-field {
            margin-bottom: 1rem;
            display: flex;
            align-items: baseline;
            gap: 1rem;
        }

        .challenge-field:last-child {
            margin-bottom: 0;
        }

        .challenge-label {
            font-weight: 600;
            color: var(--primary);
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 90px;
            flex-shrink: 0;
        }

        .challenge-value {
            font-size: 1.15rem;
            color: var(--text-primary);
            font-weight: 500;
            line-height: 1.3;
            flex: 1;
        }

        .placeholder-text {
            color: var(--text-secondary);
            font-style: italic;
            font-size: 1.125rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }

        .button {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .button-primary {
            background: var(--primary);
            color: white;
        }

        .button-primary:hover {
            background: var(--primary-dark);
        }

        .button-secondary {
            background: var(--surface);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .button-secondary:hover {
            background: var(--border);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .timer-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .timer-input-group {
            display: flex;
            align-items: center;
            border: 1px solid var(--border);
            border-radius: 6px;
            overflow: hidden;
        }

        .timer-adjust-btn {
            background: var(--surface);
            border: none;
            color: var(--text-secondary);
            width: 32px;
            height: 48px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.2s;
            user-select: none;
        }

        .timer-adjust-btn:hover:not(:disabled) {
            background: var(--border);
            color: var(--primary);
        }

        .timer-adjust-btn:active:not(:disabled) {
            background: var(--primary);
            color: white;
            transform: scale(0.95);
        }

        .timer-adjust-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .timer-adjust-btn:first-child {
            border-right: 1px solid var(--border);
        }

        .timer-adjust-btn:last-child {
            border-left: 1px solid var(--border);
        }

        .timer-display {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            padding: 0.5rem;
            border: none;
            width: 120px;
            text-align: center;
            background: var(--background);
            outline: none;
        }

        .timer-display:disabled {
            background: var(--surface);
            cursor: not-allowed;
        }

        .timer-input-group:focus-within {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
        }

        /* Docs Section */
        .docs-section {
            display: none;
        }

        .docs-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .docs-title {
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .docs-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin: 0 auto;
        }

        .docs-nav {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .docs-section-item {
            margin-top: 2rem;
        }

        .docs-section-item:first-child {
            margin-top: 0;
        }

        .docs-section-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-top: 0;
            margin-bottom: 1rem;
            font-size: 1.125rem;
        }

        .docs-links {
            list-style: none;
            margin-bottom: 2rem;
        }

        .docs-links:last-child {
            margin-bottom: 0;
        }

        .docs-link {
            display: block;
            padding: 0.5rem 0;
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s;
            cursor: pointer;
        }

        .docs-link:hover {
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .nav {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .nav-links {
                gap: 1rem;
            }

            .dojo-title, .docs-title {
                font-size: 1.8rem;
            }

            .dojo-header, .docs-header {
                margin-bottom: 1rem;
            }

            .dojo-subtitle, .docs-subtitle {
                font-size: 1rem;
            }

            .selectors-row {
                flex-direction: column;
                gap: 1.5rem;
                align-items: stretch;
            }

            .selector-section {
                flex-direction: column;
                gap: 0.75rem;
                align-items: stretch;
            }

            .selector-buttons {
                justify-content: center;
                flex-wrap: wrap;
            }

            .selector-btn {
                padding: 0.6rem 1rem;
                font-size: 0.85rem;
            }

            .generate-btn {
                padding: 1rem 2rem;
                font-size: 1rem;
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
            }

            .challenge-display {
                padding: 2rem;
            }

            .challenge-field {
                flex-direction: column;
                gap: 0.5rem;
                align-items: stretch;
            }

            .challenge-label {
                min-width: auto;
            }

            .timer-controls-wrapper {
                flex-direction: column;
                gap: 1rem;
                align-items: center;
            }

            .timer-action-buttons {
                gap: 0.5rem;
                width: 100%;
                justify-content: center;
            }

            .timer-btn {
                flex: 1;
                max-width: 100px;
            }

            .timer-input-group {
                margin: 0;
            }

            .timer-display {
                font-size: 1.5rem;
                width: 100px;
            }

            .timer-adjust-btn {
                width: 28px;
                height: 40px;
                font-size: 1rem;
            }
        }

        /* Hidden class for JavaScript */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <a href="#" class="logo">Whiteboard Dojo</a>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-section="dojo">Dojo</a></li>
                <li><a href="#" class="nav-link" data-section="docs">Docs</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <!-- Dojo Section -->
        <section class="dojo-section" id="dojo-section">
            <div class="dojo-header">
                <h1 class="dojo-title">The Dojo</h1>
                <p class="dojo-subtitle">Practice whiteboard challenges and sharpen your design thinking skills</p>
            </div>

            <div class="challenge-generator">
                <!-- Selectors Row -->
                <div class="selectors-row">
                    <div class="selector-section">
                        <label class="selector-label">Category:</label>
                        <div class="selector-buttons">
                            <button class="selector-btn category-btn active" data-category="all">All</button>
                            <button class="selector-btn category-btn" data-category="branding">Branding</button>
                            <button class="selector-btn category-btn" data-category="marketing">Marketing</button>
                            <button class="selector-btn category-btn" data-category="product-ux">Product & UX</button>
                        </div>
                    </div>
                    
                    <div class="selector-section">
                        <label class="selector-label">Level:</label>
                        <div class="selector-buttons">
                            <button class="selector-btn difficulty-btn active" data-difficulty="beginner">Beginner</button>
                            <button class="selector-btn difficulty-btn" data-difficulty="intermediate">Intermediate</button>
                            <button class="selector-btn difficulty-btn" data-difficulty="advanced">Advanced</button>
                        </div>
                    </div>
                </div>

                <!-- Generate Button Row -->
                <div class="generate-row">
                    <button class="button button-primary generate-btn" id="new-challenge-btn">
                        <span class="generate-icon">⚡</span>
                        Generate New Challenge
                    </button>
                </div>

                <!-- Challenge Display (Full Width) -->
                <div class="challenge-display">
                    <div class="challenge-content" id="challenge-content">
                        <div class="challenge-placeholder">
                            <span class="placeholder-text">Click "Generate New Challenge" to create your practice challenge</span>
                        </div>
                    </div>
                </div>

                <!-- Timer Controls (Bottom, Centered) -->
                <div class="timer-section">
                    <div class="timer-controls-wrapper">
                        <label for="timer-display" class="timer-main-label">Set Timer:</label>
                        <div class="timer-input-group">
                            <button class="timer-adjust-btn" id="decrease-timer-btn">−</button>
                            <input type="text" id="timer-display" class="timer-display" value="20:00" placeholder="MM:SS">
                            <button class="timer-adjust-btn" id="increase-timer-btn">+</button>
                        </div>
                        <div class="timer-action-buttons">
                            <button class="button button-secondary timer-btn" id="start-timer-btn" disabled>Start</button>
                            <button class="button button-secondary timer-btn" id="pause-timer-btn" disabled>Pause</button>
                            <button class="button button-secondary timer-btn" id="reset-timer-btn">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Docs Section -->
        <section class="docs-section" id="docs-section">
            <div class="docs-header">
                <h1 class="docs-title">The Docs</h1>
                <p class="docs-subtitle">Learn the art and science of whiteboard challenges</p>
            </div>

            <div class="docs-nav">
                <div class="docs-section-item">
                    <h3 class="docs-section-title">The Whiteboard Challenge</h3>
                    <ul class="docs-links">
                        <li><a class="docs-link" data-article="what-is-whiteboard-challenge">What is a Whiteboard Challenge?</a></li>
                        <li><a class="docs-link" data-article="why-we-love-whiteboard-challenges">Why We Love Whiteboard Challenges</a></li>
                        <li><a class="docs-link" data-article="whiteboard-challenge-fundamentals">Whiteboard Challenge Fundamentals</a></li>
                    </ul>
                </div>

                <div class="docs-section-item">
                    <h3 class="docs-section-title">For Individual Practice & Interview Prep</h3>
                    <ul class="docs-links">
                        <li><a class="docs-link" data-article="running-solo-practice-sessions">Running Solo Practice Sessions</a></li>
                        <li><a class="docs-link" data-article="preparing-for-your-challenge">Preparing for Your Challenge</a></li>
                        <li><a class="docs-link" data-article="job-interview-whiteboard-challenges">Whiteboard Challenges in Job Interviews</a></li>
                        <li><a class="docs-link" data-article="self-assessment-after-challenges">Self-Assessment After Challenges</a></li>
                        <li><a class="docs-link" data-article="building-whiteboard-skills">Building Your Whiteboard Skills</a></li>
                    </ul>
                </div>

                <div class="docs-section-item">
                    <h3 class="docs-section-title">For Team Development</h3>
                    <ul class="docs-links">
                        <li><a class="docs-link" data-article="running-team-practice-sessions">Running Practice Sessions with Your Team</a></li>
                        <li><a class="docs-link" data-article="preparing-team-for-challenges">Preparing Your Team for Challenges</a></li>
                        <li><a class="docs-link" data-article="role-playing-during-challenge">Role Playing During a Challenge</a></li>
                        <li><a class="docs-link" data-article="team-assessment-after-challenge">Team Assessment After the Challenge</a></li>
                    </ul>
                </div>

                <div class="docs-section-item">
                    <h3 class="docs-section-title">For Hiring & Assessment</h3>
                    <ul class="docs-links">
                        <li><a class="docs-link" data-article="why-whiteboard-challenges-in-hiring">Why Whiteboard Challenges Should Be Part of Your Hiring Process</a></li>
                        <li><a class="docs-link" data-article="designing-effective-hiring-challenges">Designing Effective Challenges for Hiring</a></li>
                        <li><a class="docs-link" data-article="running-interview-challenge">Running the Interview Challenge</a></li>
                        <li><a class="docs-link" data-article="evaluating-performance-making-decisions">Evaluating Performance and Making Decisions</a></li>
                    </ul>
                </div>

                <div class="docs-section-item">
                    <h3 class="docs-section-title">How You Can Contribute to This Project</h3>
                    <ul class="docs-links">
                        <li><a class="docs-link" data-article="make-whiteboard-dojo-better-together">Let's Make Whiteboard Dojo Better Together!</a></li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Sample challenges data with categories and new structure
        const challenges = {
            branding: {
                beginner: [
                    {
                        design: "a simple logo",
                        for: "a local coffee shop",
                        toHelp: "young professionals identify the brand"
                    },
                    {
                        design: "a color palette",
                        for: "a fitness startup",
                        toHelp: "convey energy and motivation"
                    },
                    {
                        design: "a business card layout",
                        for: "a freelance photographer",
                        toHelp: "make a memorable first impression"
                    }
                ],
                intermediate: [
                    {
                        design: "a complete brand identity system",
                        for: "a sustainable fashion brand",
                        toHelp: "appeal to environmentally conscious millennials"
                    },
                    {
                        design: "a brand refresh strategy",
                        for: "an established restaurant chain",
                        toHelp: "attract younger customers while retaining loyalty"
                    }
                ],
                advanced: [
                    {
                        design: "a comprehensive rebranding strategy",
                        for: "a B2B software company pivoting to consumer market",
                        toHelp: "completely change market perception and target audience"
                    }
                ]
            },
            marketing: {
                beginner: [
                    {
                        design: "a social media post template",
                        for: "a bakery's Instagram account",
                        toHelp: "increase daily engagement with local customers"
                    },
                    {
                        design: "an email newsletter layout",
                        for: "a book club",
                        toHelp: "keep members informed about upcoming meetings"
                    }
                ],
                intermediate: [
                    {
                        design: "a landing page for a marketing campaign",
                        for: "a SaaS product launch",
                        toHelp: "convert free trial users to paid subscribers"
                    },
                    {
                        design: "a multi-channel campaign strategy",
                        for: "a non-profit fundraising event",
                        toHelp: "reach diverse donor demographics across platforms"
                    }
                ],
                advanced: [
                    {
                        design: "a comprehensive marketing automation flow",
                        for: "an e-commerce platform",
                        toHelp: "reduce cart abandonment and increase customer lifetime value"
                    }
                ]
            },
            "product-ux": {
                beginner: [
                    {
                        design: "a login screen",
                        for: "a fitness app",
                        toHelp: "busy professionals"
                    },
                    {
                        design: "a shopping cart view",
                        for: "a recipe app", 
                        toHelp: "college students"
                    },
                    {
                        design: "a profile page",
                        for: "a music streaming app",
                        toHelp: "commuters"
                    },
                    {
                        design: "a search results view",
                        for: "a book reading app",
                        toHelp: "bookworms"
                    },
                    {
                        design: "a notification settings screen",
                        for: "a meditation app",
                        toHelp: "stressed workers"
                    }
                ],
                intermediate: [
                    {
                        design: "a multi-step checkout flow",
                        for: "an e-commerce platform",
                        toHelp: "elderly users with accessibility needs"
                    },
                    {
                        design: "a collaborative playlist feature",
                        for: "a music streaming service",
                        toHelp: "remote teams who want to bond"
                    },
                    {
                        design: "a habit tracking dashboard",
                        for: "a productivity app",
                        toHelp: "freelancers and consultants"
                    },
                    {
                        design: "a meal planning interface",
                        for: "a nutrition app",
                        toHelp: "families with dietary restrictions"
                    },
                    {
                        design: "a project management dashboard",
                        for: "a team collaboration tool",
                        toHelp: "creative agencies"
                    }
                ],
                advanced: [
                    {
                        design: "a real-time collaboration system",
                        for: "a design tool",
                        toHelp: "distributed teams across different time zones"
                    },
                    {
                        design: "an AI-powered content moderation interface",
                        for: "a social media platform",
                        toHelp: "moderators handling complex policy violations"
                    },
                    {
                        design: "a financial planning dashboard",
                        for: "a fintech application",
                        toHelp: "both individual investors and financial advisors"
                    },
                    {
                        design: "a multi-tenant analytics platform",
                        for: "an enterprise SaaS tool",
                        toHelp: "different business units with varying needs"
                    },
                    {
                        design: "a crisis management communication system",
                        for: "an emergency response platform",
                        toHelp: "first responders coordinating across multiple agencies"
                    }
                ]
            }
        };

        // App state
        let currentDifficulty = 'beginner';
        let currentCategory = 'all';
        let currentChallenge = null;
        let timer = null;
        let timeLeft = 0;
        let isTimerRunning = false;

        // DOM elements
        const categoryBtns = document.querySelectorAll('.category-btn');
        const difficultyBtns = document.querySelectorAll('.difficulty-btn');
        const challengeContent = document.querySelector('#challenge-content');
        const newChallengeBtn = document.getElementById('new-challenge-btn');
        const timerDisplay = document.getElementById('timer-display');
        const increaseTimerBtn = document.getElementById('increase-timer-btn');
        const decreaseTimerBtn = document.getElementById('decrease-timer-btn');
        const startTimerBtn = document.getElementById('start-timer-btn');
        const pauseTimerBtn = document.getElementById('pause-timer-btn');
        const resetTimerBtn = document.getElementById('reset-timer-btn');
        const navLinks = document.querySelectorAll('.nav-link');
        const dojoSection = document.getElementById('dojo-section');
        const docsSection = document.getElementById('docs-section');

        // Navigation
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const section = e.target.dataset.section;
                
                navLinks.forEach(l => l.classList.remove('active'));
                e.target.classList.add('active');
                
                if (section === 'dojo') {
                    dojoSection.style.display = 'block';
                    docsSection.style.display = 'none';
                } else {
                    dojoSection.style.display = 'none';
                    docsSection.style.display = 'block';
                }
            });
        });

        // Category selection
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                categoryBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                
                // Reset challenge display
                challengeContent.innerHTML = `
                    <div class="challenge-placeholder">
                        <span class="placeholder-text">Click "New Challenge" to generate your practice challenge</span>
                    </div>
                `;
                currentChallenge = null;
                startTimerBtn.disabled = true;
            });
        });

        // Difficulty selection
        difficultyBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                difficultyBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentDifficulty = btn.dataset.difficulty;
                
                // Reset challenge display
                challengeContent.innerHTML = `
                    <div class="challenge-placeholder">
                        <span class="placeholder-text">Click "New Challenge" to generate your practice challenge</span>
                    </div>
                `;
                currentChallenge = null;
                startTimerBtn.disabled = true;
            });
        });

        // Helper function to get all challenges from all categories
        function getAllChallenges(difficulty) {
            let allChallenges = [];
            Object.keys(challenges).forEach(category => {
                if (challenges[category][difficulty]) {
                    allChallenges = allChallenges.concat(challenges[category][difficulty]);
                }
            });
            return allChallenges;
        }

        // Challenge generation
        newChallengeBtn.addEventListener('click', () => {
            let challengeList = [];
            
            if (currentCategory === 'all') {
                challengeList = getAllChallenges(currentDifficulty);
            } else {
                challengeList = challenges[currentCategory][currentDifficulty] || [];
            }
            
            if (challengeList.length === 0) {
                challengeContent.innerHTML = `
                    <div class="challenge-placeholder">
                        <span class="placeholder-text">No challenges available for this category and difficulty level.</span>
                    </div>
                `;
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * challengeList.length);
            currentChallenge = challengeList[randomIndex];
            
            challengeContent.innerHTML = `
                <div class="challenge-structure">
                    <div class="challenge-field">
                        <div class="challenge-label">Design:</div>
                        <div class="challenge-value">${currentChallenge.design}</div>
                    </div>
                    <div class="challenge-field">
                        <div class="challenge-label">For:</div>
                        <div class="challenge-value">${currentChallenge.for}</div>
                    </div>
                    <div class="challenge-field">
                        <div class="challenge-label">To help:</div>
                        <div class="challenge-value">${currentChallenge.toHelp}</div>
                    </div>
                </div>
            `;
            
            startTimerBtn.disabled = false;
            
            // Reset timer
            resetTimer();
        });

        // Timer functions
        function parseTimeInput(timeString) {
            // Parse MM:SS format or just MM format
            const parts = timeString.split(':');
            if (parts.length === 2) {
                const minutes = parseInt(parts[0]) || 0;
                const seconds = parseInt(parts[1]) || 0;
                return (minutes * 60) + seconds;
            } else if (parts.length === 1) {
                const minutes = parseInt(parts[0]) || 0;
                return minutes * 60;
            }
            return 0;
        }

        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateTimerDisplay() {
            timerDisplay.value = formatTime(timeLeft);
        }

        function increaseTimer() {
            if (!isTimerRunning && timeLeft === 0) {
                const currentTime = parseTimeInput(timerDisplay.value);
                const newTime = Math.min(currentTime + (5 * 60), 120 * 60); // Add 5 minutes, max 120 minutes
                timerDisplay.value = formatTime(newTime);
            }
        }

        function decreaseTimer() {
            if (!isTimerRunning && timeLeft === 0) {
                const currentTime = parseTimeInput(timerDisplay.value);
                const newTime = Math.max(currentTime - (5 * 60), 5 * 60); // Remove 5 minutes, min 5 minutes
                timerDisplay.value = formatTime(newTime);
            }
        }

        function updateButtonStates() {
            const isRunning = isTimerRunning;
            const isPaused = timeLeft > 0 && !isTimerRunning;
            
            increaseTimerBtn.disabled = isRunning || isPaused;
            decreaseTimerBtn.disabled = isRunning || isPaused;
            timerDisplay.disabled = isRunning;
        }

        function startTimer() {
            if (!currentChallenge) return;
            
            if (!isTimerRunning) {
                if (timeLeft === 0) {
                    timeLeft = parseTimeInput(timerDisplay.value);
                    if (timeLeft === 0) {
                        alert('Please enter a valid time (e.g., 20:00 or 20)');
                        return;
                    }
                }
                
                timer = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        isTimerRunning = false;
                        startTimerBtn.textContent = 'Start';
                        startTimerBtn.disabled = false;
                        pauseTimerBtn.disabled = true;
                        updateButtonStates();
                        alert('Time\'s up! Great work on your challenge!');
                    }
                }, 1000);
                
                isTimerRunning = true;
                startTimerBtn.textContent = 'Resume';
                startTimerBtn.disabled = true;
                pauseTimerBtn.disabled = false;
                updateButtonStates();
            }
        }

        function pauseTimer() {
            if (isTimerRunning) {
                clearInterval(timer);
                isTimerRunning = false;
                startTimerBtn.disabled = false;
                pauseTimerBtn.disabled = true;
                updateButtonStates();
            }
        }

        function resetTimer() {
            clearInterval(timer);
            isTimerRunning = false;
            timeLeft = 0;
            timerDisplay.value = '20:00';
            startTimerBtn.textContent = 'Start';
            startTimerBtn.disabled = currentChallenge ? false : true;
            pauseTimerBtn.disabled = true;
            updateButtonStates();
        }

        // Timer event listeners
        increaseTimerBtn.addEventListener('click', increaseTimer);
        decreaseTimerBtn.addEventListener('click', decreaseTimer);
        startTimerBtn.addEventListener('click', startTimer);
        pauseTimerBtn.addEventListener('click', pauseTimer);
        resetTimerBtn.addEventListener('click', resetTimer);

        // Initialize timer display and button states
        timerDisplay.value = '20:00';
        updateButtonStates();
    </script>
</body>
</html>